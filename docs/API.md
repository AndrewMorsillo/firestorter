<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Collection](#collection)
    -   [docs](#docs)
    -   [ref](#ref)
    -   [id](#id)
    -   [path](#path)
    -   [query](#query)
    -   [realtimeUpdating](#realtimeupdating)
    -   [fetch](#fetch)
    -   [fetching](#fetching)
    -   [add](#add)
    -   [deleteAll](#deleteall)
-   [Document](#document)
    -   [data](#data)
    -   [ref](#ref-1)
    -   [id](#id-1)
    -   [path](#path-1)
    -   [snapshot](#snapshot)
    -   [createTime](#createtime)
    -   [updateTime](#updatetime)
    -   [readTime](#readtime)
    -   [update](#update)
    -   [delete](#delete)
    -   [onFinalRelease](#onfinalrelease)
-   [setFirebaseApp](#setfirebaseapp)

## Collection

The Collection class lays at the heart of `react-firestore-mobx`.
It represents a collection in Firestore and its queried data. It is
observable so that it can be efficiently linked to a React Component
using `mobx-react`'s `observer` pattern.

Collection supports three modes of real-time updating:

-   "off" (real-time updating is turned off)
-   "on" (real-time updating is permanently turned on)
-   "auto" (real-time updating is enabled on demand) (default)

The "auto" mode ensures that Collection only communicates with
the firestore back-end whever the Collection is actually
rendered by a Component. This prevents unneccesary background
updates and leads to the best possible performance.

When real-time updates are enabled, data is automatically fetched
from Firestore whenever it changes in the back-end (using `onSnapshot`).
This enables almost magical instant updates. When data is changed,
only those documents are updated that have actually changed. Document
objects are re-used where possible, and just their data is updated.
The same is true for the `docs` property. If no documents where
added, removed, re-ordered, then the `docs` property itself will not
change.

Alternatively, you can keep real-time updates turned off and fetch
manually. This will update the Collection as efficiently as possible.
If nothing has changed on the back-end, no new Documents would be
created or modified.

**Parameters**

-   `pathOrRef` **(CollectionReference | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String))** 
-   `realtimeUpdating` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)**  (optional, default `'auto'`)

**Examples**

```javascript
import {Collection} from 'react-firestore-mobx';

// Create a collection using path (preferred)
const col = new Collection('artists/Metallica/albums');

// Create a collection using a reference
const col2 = new Collection(firebase.firestore().collection('todos'));

// Create a collection and permanently start real-time updating
const col2 = new Collection('artists', 'on');

// Create a collection and set a query on it
const col3 = new Collection('artists');
col3.query = col3.ref.orderBy('name', 'asc');
```

```javascript
// In manual mode, just call `fetch` explicitely
const col = new Collection('albums');
col.fetch().then((collection) => {
 collection.docs.forEach((doc) => console.log(doc));
});

// Yo can use the `fetching` property to see whether a fetch
// is in progress
console.log(col.fetching);
```

### docs

Array of all the documents that have been fetched
from firestore.

**Examples**

```javascript
collection.docs.forEach((doc) => {
  console.log(doc.data);
});
```

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Document](#document)>** 

### ref

Firestore collection reference.

Use this property to get or set the collection
reference. When set, a fetch to the new collection
is performed.

Alternatively, you can also use `path` to change the
reference in more a readable way.

**Examples**

```javascript
const col = new Collection(firebase.firestore().collection('albums/splinter/tracks'));
...
// Switch to another collection
col.ref = firebase.firestore().collection('albums/americana/tracks');
```

Returns **CollectionReference** 

### id

Id of the Firestore collection (e.g. 'tracks').

To get the full-path of the collection, use `path`.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### path

Path of the collection (e.g. 'albums/blackAlbum/tracks').

Use this property to switch to another collection in
the back-end. Effectively, it is a more compact
and readable way of setting a new ref.

**Examples**

```javascript
const col = new Collection('artists/Metallica/albums');
...
// Switch to another collection in the back-end
col.path = 'artists/EaglesOfDeathMetal/albums';
```

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### query

Firestore query.

Use this property to set any order-by, where,
limit or start/end criteria. When set, that query
is used to retrieve any data. When cleared, the collection
reference is used.

**Examples**

```javascript
const todos = new Collection('todos');

// Sort the collection
todos.query = todos.ref.orderBy('text', 'asc');

// Order, filter & limit
todos.query = todos.ref.where('finished', '==', false).orderBy('finished', 'asc').limit(20);

// Clear the query, will cause whole collection to be fetched
todos.query = undefined;
```

Returns **Query** 

### realtimeUpdating

Real-time updating mode.

Can be set to any of the following values:

-   "auto" (enables real-time updating when the collection is observed)
-   "off" (no real-time updating, you need to call fetch explicitly)
-   "on" (real-time updating is permanently enabled)

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### fetch

Fetches new data from firestore. Use this to manually fetch
new data when `realtimeUpdatingEnabled` is False.

**Examples**

```javascript
const col = new Collection('albums');
col.fetch().then(({docs}) => {
  docs.forEach(doc => console.log(doc));
});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Collection](#collection)>** 

### fetching

True when a fetch is in progress.

Fetches are performed in these cases:

-   When real-time updating is started
-   When a different `ref` or `path` is set
-   When a `query` is set or cleared
-   When `fetch` is explicitely called

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### add

Add a new document to this collection with the specified
data, assigning it a document ID automatically.

**Parameters**

-   `data` **any** 

**Examples**

```javascript
const doc = await collection.add({
  finished: false,
  text: 'New todo',
  options: {
    highPrio: true
  }
});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Document](#document)>** 

### deleteAll

Deletes all the documents in the collection or query.

TODO - Not implemented yet

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;void>** 

## Document

Document represents a document stored in the firestore
no-sql database. It is initialized with a firestore `DocumentSnapshot`
object so that it immediately has data. Document is
observable so that it can be efficiently linked to a React Component
using `mobx-react`'s `observer` pattern. This ensures that a component
is only re-rendered when data that is accessed in the `render` function
has changed.

Documents are typically created by the `Collection` class but can also
be explicitly created using its constructor.

**Parameters**

-   `snapshot` **DocumentSnapshot** 

### data

Returns the data inside the firestore document.

**Examples**

```javascript
const docData = todos.docs.map((doc) => {
console.log(doc.data);
 // {
 //   finished: false
 //   text: 'Must do this'
 // }
});
```

Returns **any** 

### ref

Firestore document reference.

Returns **DocumentReference** 

### id

Id of the firestore document.

To get the full-path of the document, use `path`.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### path

Path of the document (e.g. 'albums/blackAlbum').

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### snapshot

Underlying firestore snapshot.

This property can be used to update the data
in the Document. It is for instance used by
the Collection class to update the document when an
update is received from the back-end.

Returns **DocumentSnapshot** 

### createTime

Time the document was created in firestore.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### updateTime

Time the document was last updated in firestore.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### readTime

Time this document was last read from firestore.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### update

Updates one or more fields in the document.

The update will fail if applied to a document that does
not exist.

**Parameters**

-   `fields` **any** 

**Examples**

```javascript
await todoDoc.update({
 finished: true,
  text: 'O yeah, checked this one off',
  foo: {
    bar: 10
  }
});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;void>** 

### delete

Deletes the document in Firestore.

Returns a promise that resolves once the document has been
successfully deleted from the backend (Note that it won't
resolve while you're offline).

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;void>** 

### onFinalRelease

Overidable method that is called whenever the document
is no longer referenced. Can be used to perform optional
cleanup.

## setFirebaseApp

Initializes `react-firestore-mobx` with the firebase-app.

**Parameters**

-   `firebase` **Firebase** 

**Examples**

```javascript
import firebase from 'firebase';
import 'firebase/firestore';
import {setFirebaseApp, Collection} from 'firestore-react-mobx';

// Initialize firebase app
firebase.initializeApp({...});

// Initialize `react-firestore-mobx`
setFirebaseApp(firebase);

// Create collection and listen for real-time updates
const albums = new Collection('artists/Metallica/albumbs').start();
...
```
